<div>

  <div class="detailsDiv">
    <mat-card>
      <mat-card-title>
        <span>
          <b>Create Event</b>
        </span>
      </mat-card-title>
      <mat-card-subtitle>
        <span>
          Submit a wildlife mortality/morbidity or surveillance event
        </span>
      </mat-card-subtitle>

      <mat-card-content>

        <form [formGroup]="eventSubmissionForm">

          <div class="horizontal-form-container">

            <mat-form-field class="form-control">
              <mat-select placeholder="Event Type" formControlName="event_type" required>
                <mat-option *ngFor="let eventType of eventTypes" value="{{eventType.id}}">{{eventType.name}}</mat-option>
              </mat-select>
              <mat-hint align="end" matTooltip="Public field">
                <mat-icon>public</mat-icon>
              </mat-hint>
              <mat-error *ngIf="eventSubmissionForm.get('event_type').invalid">{{getErrorMessage('event_type')}}</mat-error>
            </mat-form-field>

            <mat-form-field class="form-control">
              <input matInput placeholder="Event Name" formControlName="event_reference">
              <mat-hint align="start">Reference name for this event (private) </mat-hint>
            </mat-form-field>

            <mat-form-field class="form-control">
              <mat-select placeholder="Event Visibility" formControlName="public" required>
                <mat-option [value]="true">Visible to Public</mat-option>
                <mat-option [value]="false">Not Visible to Public</mat-option>
              </mat-select>
              <mat-hint align="start"></mat-hint>
              <mat-error *ngIf="eventSubmissionForm.get('event_type').invalid">{{getErrorMessage('event_type')}}</mat-error>
            </mat-form-field>

          </div>


          <div class="horizontal-form-container">

            <mat-form-field class="form-control event-org-select">
              <mat-select placeholder="Event Organization" formControlName="new_organizations" multiple>
                <mat-option *ngFor="let organization of organizations" value="{{organization.id}}">{{organization.name}}</mat-option>
              </mat-select>
              <mat-hint align="start">
                Event organization contact for display to general public, for general inquries
              </mat-hint>
              <mat-hint align="end" matTooltip="Public field">
                <mat-icon>public</mat-icon>
              </mat-hint>
            </mat-form-field>
          </div>


          <!-- <div class="horizontal-form-container">
            <mat-slide-toggle>Visible Publicly in WHISPers</mat-slide-toggle>
          </div> -->

          <p>

            <!-- Begin event comments section-->
            <!-- <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                   <mat-icon>comment</mat-icon>&nbsp;Event Comments (Optional)
                </mat-panel-title>
                <mat-panel-description>
                  Comments on the Event
                </mat-panel-description>
              </mat-expansion-panel-header>

              <div formArrayName="comments">
                <div *ngFor="let comments of getEventComments(eventSubmissionForm); let h = index">

                  <div [formGroupName]="h">

                    <div class="horizontal-form-container">

                      <mat-form-field class="general-comment-text-area">
                        <textarea matInput maxlength="1000" #comment placeholder="Comment" formControlName="comment"></textarea>
                        <mat-hint align="end">{{comment.value.length}} / 1000</mat-hint>
                      </mat-form-field>

                      <mat-form-field class="form-control">
                        <mat-select placeholder="Type" formControlName="comment_type">
                          <mat-option *ngFor="let commentType of commentTypes" [value]="commentType.id">{{commentType.name}}</mat-option>
                        </mat-select>
                      </mat-form-field>

                      <button mat-icon-button color="warn" aria-label="Remove this comment" (click)="removeEventComment(h)" matTooltip="Remove this comment">
                        <i class="material-icons">remove_circle</i>
                      </button>
                    </div>


                  </div>

                  <mat-divider [inset]="true"></mat-divider>
                  <br>
                </div>
              </div>

              <div class="button-row">
                <button mat-button color="primary" matTooltip="Add comment to this event" (click)="addEventComment(h)">
                  <i class="material-icons">add_circle</i> Add Comment</button>
              </div>

            </mat-expansion-panel> -->
            <!-- End event comments section-->

        </form>

        <p>

          <!--Locations Section-->
          <div>
            <h4>Event Locations</h4>
            <p>
              <form [formGroup]="eventSubmissionForm">
                <div formArrayName="new_event_locations">


                  <div *ngFor="let eventLocation of getEventLocations(eventSubmissionForm); let i = index">
                    <!-- Begin repeating Event location markup-->

                    <mat-card class="event-location-card" [formGroupName]="i">
                      <h3>Location {{i+1}}</h3>
                      <mat-horizontal-stepper [linear]="false" #stepper linear>

                        <!-- <mat-step [stepControl]="eventSubmissionForm.get('new_event_locations').controls[i].get('country').valid"> -->
                        <mat-step [stepControl]="eventSubmissionForm">

                          <ng-template matStepLabel>Location Details</ng-template>

                          <div class="horizontal-form-container">
                            <mat-form-field class="form-control">
                              <input matInput [matDatepicker]="startDate" placeholder="Onset Date" formControlName="start_date">
                              <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                              <mat-datepicker #startDate></mat-datepicker>
                              <mat-hint align="end" matTooltip="Public field">
                                <mat-icon>public</mat-icon>
                              </mat-hint>
                            </mat-form-field>

                            <mat-form-field class="form-control">
                              <input matInput [matDatepicker]="endDate" placeholder="End Date" formControlName="end_date">
                              <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
                              <mat-datepicker #endDate></mat-datepicker>
                              <mat-hint align="end" matTooltip="Public field">
                                <mat-icon>public</mat-icon>
                              </mat-hint>
                            </mat-form-field>
                          </div>
                          <br>

                          <div class="horizontal-form-container">

                            <mat-form-field class="form-control">
                              <mat-select placeholder="Country" formControlName="country" (ngModelChange)="updateAdminLevelOneOptions($event)" required>
                                <mat-option *ngFor="let country of countries" value="{{country.id}}">{{country.name}}</mat-option>
                              </mat-select>
                              <mat-hint align="end" matTooltip="Public field">
                                <mat-icon>public</mat-icon>
                              </mat-hint>
                              <mat-error *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('country').invalid">Please enter a value</mat-error>
                            </mat-form-field>

                            <mat-form-field class="form-control">
                              <mat-select placeholder="State" formControlName="administrative_level_one" (ngModelChange)="updateAdminLevelTwoOptions($event)"
                                required>
                                <mat-option *ngFor="let adminLevelOne of adminLevelOnes" value="{{adminLevelOne.id}}">{{adminLevelOne.name}}</mat-option>
                              </mat-select>
                              <mat-hint align="start">Select a country to populate/update state list </mat-hint>
                              <mat-hint align="end" matTooltip="Public field">
                                <mat-icon>public</mat-icon>
                              </mat-hint>
                              <mat-error *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('administrative_level_one').invalid">Please enter a value</mat-error>
                            </mat-form-field>

                            <mat-form-field class="form-control">
                              <mat-select placeholder="County" formControlName="administrative_level_two" required>
                                <mat-option *ngFor="let adminLevelTwo of adminLevelTwos" value="{{adminLevelTwo.id}}">{{adminLevelTwo.name}}</mat-option>
                              </mat-select>
                              <mat-hint align="start">Select a state to populate/update county list </mat-hint>
                              <mat-hint align="end" matTooltip="Public field">
                                <mat-icon>public</mat-icon>
                              </mat-hint>
                              <mat-error *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('administrative_level_two').invalid">Please enter a value</mat-error>
                            </mat-form-field>

                          </div>

                          <div class="vertical-form-container">
                            <mat-form-field class="form-control">
                              <input matInput placeholder="Location Name" formControlName="name">
                            </mat-form-field>

                            <mat-form-field class="form-control">
                              <mat-select placeholder="Land Ownership" formControlName="land_ownership" required>
                                <mat-option *ngFor="let landOwnership of landOwnerships" value="{{landOwnership.id}}">{{landOwnership.name}}</mat-option>
                              </mat-select>
                              <mat-error *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('land_ownership').invalid">Please enter a value</mat-error>
                            </mat-form-field>

                          </div>

                          <div class="horizontal-form-container">
                            <mat-form-field class="form-control">
                              <input matInput placeholder="Latitude" formControlName="latitude">
                              <mat-error *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('latitude').invalid">Invalid latitude</mat-error>
                            </mat-form-field>

                            <mat-form-field class="form-control">
                              <input matInput placeholder="Longitude" formControlName="longitude">
                              <mat-error *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('longitude').invalid">Invalid longitude</mat-error>
                            </mat-form-field>
                          </div>

                          <div class="vertical-form-container">
                            <mat-form-field class="form-control">
                              <input matInput placeholder="GNIS Standardized Location Name" formControlName="gnis_name">
                              <mat-hint align="start" matTooltip="field under development. value will not save.">
                                <strong>
                                  <mat-icon>error_outline</mat-icon>UNDER DEVELOPMENT</strong>
                              </mat-hint>
                            </mat-form-field>
                          </div>

                          <div>
                            <button mat-button matStepperNext type="button"> Next
                              <i class="material-icons"> navigate_next </i>
                            </button>
                          </div>

                        </mat-step>

                        <mat-step [stepControl]="eventSubmissionForm">
                          <ng-template matStepLabel>Comments</ng-template>

                          <span>Text in at least one of the comment categories below is required. Please be as thorough as possible
                            to aid interpretation of data and to potentially guide cause of death determination and management
                            actions.
                          </span>
                          <p>

                            <mat-form-field class="comment-text-area">
                              <textarea matInput #areaDescription maxlength="1000" minRows="3" placeholder="History" formControlName="history"></textarea>
                              <mat-hint align="start" class="hint">
                                <strong>chronological description of current observational information leading up to finding sick
                                  or dead wildlife, plus historical information about past events</strong>
                              </mat-hint>
                              <mat-hint align="end">{{areaDescription.value.length}} / 1000</mat-hint>
                            </mat-form-field>
                            <p>

                              <mat-form-field class="comment-text-area">
                                <textarea matInput #areaDescription maxlength="1000" minRows="3" placeholder="Site Description" formControlName="site_description"></textarea>
                                <mat-hint align="start" class="hint">
                                  <strong> animal and human land use (e.g., other species present, hunting and agricultural activities),
                                    habitat types (e.g., vegetation, water features), nearby structures (e.g., buildings,
                                    power lines, wind turbines), public health warnings, or other major characteristics of
                                    the area</strong>
                                </mat-hint>
                                <mat-hint align="end">{{areaDescription.value.length}} / 1000</mat-hint>
                              </mat-form-field>
                              <p>

                                <mat-form-field class="comment-text-area">
                                  <textarea matInput #envFactors maxlength="1000" placeholder="Environmental Factors" formControlName="environmental_factors"></textarea>
                                  <mat-hint align="start">
                                    <strong>storms, precipitation, temperature changes, migration, toxins, or other factors that
                                      may contribute to stress in the animals
                                    </strong>
                                  </mat-hint>
                                  <mat-hint align="end">{{envFactors.value.length}} / 1000</mat-hint>
                                </mat-form-field>
                                <p>

                                  <mat-form-field class="comment-text-area">
                                    <textarea matInput #clinicalSigns maxlength="1000" placeholder="Clinical Signs" formControlName="clinical_signs"></textarea>
                                    <mat-hint align="start">
                                      <strong>any unusual behavior or physical appearance in the animals</strong>
                                    </mat-hint>
                                    <mat-hint align="end">{{clinicalSigns.value.length}} / 1000</mat-hint>
                                  </mat-form-field>
                                  <p>

                                    <!-- <div formArrayName="comments">
                                      <div *ngFor="let comments of getLocationComments(eventLocation); let c = index"> -->

                                    <mat-form-field class="comment-text-area">
                                      <textarea matInput #generalComment maxlength="1000" placeholder="Additonal Comment" formControlName="comment"></textarea>
                                      <mat-hint align="start">
                                        <strong>any additional comment not covered by the fields above</strong>
                                      </mat-hint>
                                      <mat-hint align="end">{{generalComment.value.length}} / 1000</mat-hint>
                                    </mat-form-field>
                                    <!-- </div>
                                    </div> -->

                                    <div>
                                      <button mat-button matStepperPrevious type="button">
                                        <i class="material-icons"> arrow_back_ios </i> Back</button>
                                      <button mat-button matStepperNext type="button"> Next
                                        <i class="material-icons"> navigate_next </i>
                                      </button>
                                    </div>
                        </mat-step>

                        <mat-step [stepControl]="eventSubmissionForm">

                          <ng-template matStepLabel>Species</ng-template>
                          <div>

                            <!-- <h4>Species Affected</h4> -->
                            <!-- <button mat-icon-button color="accent">
                                    <mat-icon aria-label="Example icon-button with a heart icon">favorite</mat-icon>
                                  </button> -->
                            <div formArrayName="location_species">
                              <div class="species-container" *ngFor="let locationSpecies of getLocationSpecies(eventLocation); let j = index">

                                <div [formGroupName]="j">

                                  <!-- <div class="horizontal-form-container"></div> -->

                                  <div class="horizontal-form-container" class="species-controls-container">

                                    <mat-form-field class="form-control">
                                      <mat-select placeholder="Species" formControlName="species">
                                        <mat-option *ngFor="let species of species" value="{{species.id}}">{{species.name}}</mat-option>
                                      </mat-select>
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>


                                    <!-- TODO: implement autocomplete for species later -->
                                    <!-- <mat-form-field>
                                      <input type="text" matInput placeholder="Species" aria-label="Species" [matAutocomplete]="speciesAutoComplete" formControlName="species">
                                      <mat-autocomplete #speciesAutoComplete="matAutocomplete" [displayWith]="displayFn">
                                        <mat-option *ngFor="let species of filteredSpecies | async" [value]="species">
                                          <span>{{ species.name }}</span>
                                        </mat-option>
                                      </mat-autocomplete>
                                    </mat-form-field> -->

                                    <mat-form-field class="species-number-control">
                                      <input matInput placeholder="Known Dead" type="number" formControlName="dead_count">
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>

                                    <mat-form-field class="species-number-control">
                                      <input matInput placeholder="Estimated Dead" type="number" formControlName="dead_count_estimated">
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>

                                    <mat-form-field class="species-number-control">
                                      <input matInput placeholder="Known Sick" type="number" formControlName="sick_count">
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>

                                    <mat-form-field class="species-number-control">
                                      <input matInput placeholder="Estimated Sick" type="number" formControlName="sick_count_estimated">
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>

                                    <mat-form-field class="species-number-control">
                                      <input matInput placeholder="Est. Population at Risk" type="number" formControlName="population_count">
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>

                                    <mat-form-field class="species-number-control">
                                      <mat-select placeholder="Age Bias" formControlName="age_bias">
                                        <mat-option *ngFor="let ageBias of ageBiases" value="{{ageBias.id}}">{{ageBias.name}}</mat-option>
                                      </mat-select>
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>

                                    <mat-form-field class="species-number-control">
                                      <mat-select placeholder="Sex Bias" formControlName="sex_bias">
                                        <mat-option *ngFor="let sexBias of sexBiases" value="{{sexBias.id}}">{{sexBias.name}}</mat-option>
                                      </mat-select>
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>

                                    <mat-form-field class="species-number-control">
                                      <mat-select placeholder="Captivity" formControlName="captive">
                                        <mat-option [value]="true">Captive > 72 hours</mat-option>
                                        <mat-option [value]="false">Wild and/or free-ranging</mat-option>
                                      </mat-select>
                                      <mat-hint align="end" matTooltip="Public field">
                                        <mat-icon>public</mat-icon>
                                      </mat-hint>
                                    </mat-form-field>

                                    <button mat-icon-button color="accent" aria-label="Apply species to all locations" matTooltip="Apply species to all locations"
                                      (click)="createCommonEventDataObject('species', i, j )">
                                      <i class="material-icons">group_work</i>
                                    </button>

                                    <button mat-icon-button color="warn" aria-label="Remove this species from this location" (click)="removeLocationSpecies(i, j)"
                                      matTooltip="Remove this species from this location">
                                      <i class="material-icons">remove_circle</i>
                                    </button>

                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="button-row">
                            <button mat-button color="primary" matTooltip="Add species to this location" (click)="addLocationSpecies(i)">
                              <i class="material-icons">add_circle</i> Add Species</button>
                          </div>
                          <p>
                            <div>
                              <button mat-button matStepperPrevious type="button">
                                <i class="material-icons"> arrow_back_ios </i> Back</button>
                              <button mat-button matStepperNext type="button"> Next
                                <i class="material-icons"> navigate_next </i>
                              </button>
                            </div>

                        </mat-step>

                        <mat-step [stepControl]="eventSubmissionForm">

                          <ng-template matStepLabel>Contacts</ng-template>

                          <div class="contacts-section-header">
                            <div>
                              <h4>
                                <button mat-button color="primary" class="event-detail-action-button" (click)="openCreateContactDialog()">
                                  <i class="material-icons">person_add</i> Create New Contact</button>
                              </h4>
                            </div>
                          </div>

                          <div formArrayName="location_contacts">
                            <div class="contacts-container" *ngFor="let locationContacts of getLocationContacts(eventLocation); let k = index">

                              <div class="horizontal-form-container contact-controls-container" [formGroupName]="k">
                                <mat-form-field class="form-control contact-select">
                                  <mat-select placeholder="Contact" formControlName="id">
                                    <mat-option *ngFor="let contact of userContacts" [value]="contact.id">{{contact.first_name}} {{contact.last_name}} | {{contact.organization | displayValue:'name':this.organizations}}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>

                                <mat-form-field class="form-control  contact-type-select">
                                  <mat-select placeholder="Type" formControlName="contact_type" required>
                                    <mat-option *ngFor="let contactType of contactTypes" [value]="contactType.id">{{contactType.name}}</mat-option>
                                  </mat-select>
                                </mat-form-field>

                                <div class="contact-button-div">

                                  <button mat-icon-button color="accent" aria-label="Apply contact to all locations" matTooltip="Apply contact to all locations"
                                    (click)="createCommonEventDataObject('contact', i, k )">
                                    <i class="material-icons">group_work</i>
                                  </button>



                                  <button mat-icon-button color="accent" aria-label="View contact details" matTooltip="View contact details">
                                    <i class="material-icons">assignment_ind</i>
                                  </button>

                                  <button mat-icon-button color="warn" aria-label="Remove this contact from this location" (click)="removeLocationContacts(i, k)"
                                    matTooltip="Remove this contact from this location">
                                    <i class="material-icons">remove_circle</i>
                                  </button>

                                </div>



                              </div>
                              <mat-divider [inset]="true"></mat-divider>
                              <br>
                            </div>
                          </div>

                          <div class="button-row">
                            <button mat-button color="primary" matTooltip="Add contact to this location" (click)="addLocationContacts(i)">
                              <i class="material-icons">add_circle</i> Add Contact</button>
                          </div>

                          <div>
                            <button mat-button matStepperPrevious type="button">
                              <i class="material-icons"> arrow_back_ios </i> Back</button>
                            <button mat-button matStepperNext type="button"> Next
                              <i class="material-icons"> navigate_next </i>
                            </button>
                          </div>

                        </mat-step>

                        <mat-step [stepControl]="eventSubmissionForm">
                          <ng-template matStepLabel>Service Request</ng-template>

                          <div>
                            <h3>
                              Specimen Consultation and Diagnostic Services Request &nbsp;&nbsp;&nbsp;&nbsp;
                              <strong>
                                <mat-icon>error_outline</mat-icon>UNDER DEVELOPMENT</strong>
                            </h3>

                            <h4>Request consultation and diagnostic services for specimens of affected species at this location.
                            </h4>

                            <mat-radio-group>
                              <mat-radio-button value="1">Request diagnostic and consultative services </mat-radio-button>
                              <p>
                                <mat-radio-button value="2">Request consultative services ONLY </mat-radio-button>
                                <p>
                                  <mat-radio-button value="3">Request no services </mat-radio-button>
                            </mat-radio-group>
                          </div>

                          <div>
                              <button mat-button matStepperPrevious type="button">
                                <i class="material-icons"> arrow_back_ios </i> Back</button>
                              <button mat-button matStepperNext type="button"> Next
                                <i class="material-icons"> navigate_next </i>
                              </button>
                            </div>
                        </mat-step>

                        <mat-step>
                          <ng-template matStepLabel>Review</ng-template>

                          <span *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].valid">
                            <h3>
                              <mat-icon>check</mat-icon>
                              <span class="alert-text">Finished with Location {{i+1}}</span>
                            </h3>
                          </span>

                          <mat-error *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('country').invalid">
                            <mat-icon class="icon">error</mat-icon>
                            <span class="alert-text">Missing country selection.</span>
                          </mat-error>
                          <p>
                            <mat-error color="warn" *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('administrative_level_one').invalid">
                              <mat-icon class="icon">error</mat-icon>
                              <span class="alert-text">Missing state selection.</span>
                            </mat-error>
                            <p>
                              <mat-error color="warn" *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('administrative_level_one').invalid">
                                <mat-icon class="icon">error</mat-icon>
                                <span class="alert-text">Missing county selection.</span>
                              </mat-error>
                              <p>

                                <mat-error color="warn" *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('land_ownership').invalid">
                                  <mat-icon class="icon">error</mat-icon>
                                  <span class="alert-text">Missing land ownership selection.</span>
                                </mat-error>
                                <p>
                                  <mat-error color="warn" *ngIf="eventSubmissionForm.get('new_event_locations').controls[i].get('location_contacts').invalid">
                                    <mat-icon class="icon">error</mat-icon>
                                    <span class="alert-text">Missing contact type selection.</span>
                                  </mat-error>

                                  <div>
                                    <button mat-button matStepperPrevious type="button">
                                      <i class="material-icons"> arrow_back_ios </i> Back</button>
                                    <!-- <button mat-button (click)="stepper.reset()">Reset</button> -->
                                    <button mat-button color="primary" matTooltip="Add another location to this event" (click)="addEventLocation()">
                                      <mat-icon>add_location</mat-icon>Add Another Location</button>
                                  </div>
                        </mat-step>

                      </mat-horizontal-stepper>


                      <p>
                        <mat-divider [inset]="true"></mat-divider>
                        <p>
                          <button mat-button color="warn" (click)="openEventLocationRemoveConfirm(i)">
                            <i class=" material-icons ">remove_circle</i> Remove this Event Location</button>

                    </mat-card>


                    <!-- End repeating Event location markup-->
                  </div>


                </div>
              </form>
          </div>
          <!-- End Locations Section-->

          <button mat-button color="primary" matTooltip="Add another location to this event" (click)="addEventLocation()">
            <mat-icon>add_location</mat-icon>Add Location</button>

          <p>

            <!-- Begin event comments section-->
            <form [formGroup]="eventSubmissionForm">
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>comment</mat-icon>&nbsp;Event Comments (Optional)
                  </mat-panel-title>
                  <mat-panel-description>
                    Comments on the Event
                  </mat-panel-description>
                </mat-expansion-panel-header>

                <div formArrayName="new_comments">
                  <div *ngFor="let comments of getEventComments(eventSubmissionForm); let h = index">

                    <div [formGroupName]="h">

                      <div class="horizontal-form-container">

                        <mat-form-field class="general-comment-text-area">
                          <textarea matInput maxlength="1000" #comment placeholder="Comment" formControlName="comment"></textarea>
                          <mat-hint align="end">{{comment.value.length}} / 1000</mat-hint>
                        </mat-form-field>

                        <mat-form-field class="form-control">
                          <mat-select placeholder="Type" formControlName="comment_type">
                            <mat-option *ngFor="let commentType of commentTypes" [value]="commentType.id">{{commentType.name}}</mat-option>
                          </mat-select>
                        </mat-form-field>

                        <button mat-icon-button color="warn" aria-label="Remove this comment" (click)="removeEventComment(h)" matTooltip="Remove this comment">
                          <i class="material-icons">remove_circle</i>
                        </button>
                      </div>

                    </div>

                    <mat-divider [inset]="true"></mat-divider>
                    <br>
                  </div>
                </div>

                <div class="button-row">
                  <button mat-button color="primary" matTooltip="Add comment to this event" (click)="addEventComment()">
                    <mat-icon>add_comment</mat-icon> Add Comment</button>
                </div>

              </mat-expansion-panel>
            </form>
            <!-- End event comments section-->

            <mat-divider [inset]="true"></mat-divider>

            <!-- Begin Specimen Submission Request section-->
            <!-- <div>
              <h4>
                <mat-icon>assistant</mat-icon> Specimen Consultation and Diagnostic Services Request &nbsp;&nbsp;&nbsp;&nbsp;
                <strong>
                  <mat-icon>error_outline</mat-icon>UNDER DEVELOPMENT</strong>
              </h4>

              <mat-radio-group>
                <mat-radio-button value="1">Request diagnostic and consultative services </mat-radio-button>
                <mat-radio-button value="2">Request consultative services ONLY </mat-radio-button>
                <mat-radio-button value="3">Request no services </mat-radio-button>
              </mat-radio-group>
            </div>
            <p> -->
              <!-- End Specimen Submission Request section-->

              <mat-divider [inset]="true"></mat-divider>

              <mat-progress-bar mode="indeterminate " *ngIf="submitLoading " class="event-submit-progress-bar "></mat-progress-bar>
              <p>
                <button mat-raised-button color="primary" [disabled]="eventSubmissionForm.invalid " (click)="openEventSubmitConfirm(eventSubmissionForm.value)">
                  <i class="material-icons ">pageview</i> Review Event Submission</button>
                <p>
                  <button mat-raised-button color="primary" [disabled]="eventSubmissionForm.invalid " (click)="submitEvent(eventSubmissionForm.value)">
                    <i class="material-icons ">done</i> Create Event</button>

                  <div class="temporary-form-value-display ">
                    <h3>Temporary Form Value display (not for production)</h3>
                    <p>Form Status: {{eventSubmissionForm.status}}
                      <pre> {{eventSubmissionForm.value | json}} </pre>
                  </div>

      </mat-card-content>
    </mat-card>
  </div>