<div>
    <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Notification Settings
            </mat-panel-title>
            <mat-panel-description>
              Add custom notifications or edit existing ones
            </mat-panel-description>
          </mat-expansion-panel-header>
          <mat-card>
              <mat-card-title>
                  Owned and Collaborating Events Notifications
              </mat-card-title>
              <mat-card-content>
                <div class="results-table-div">
                    <div class="mat-table">
                        <div class="mat-header-row">
                          <div class="mat-header-cell"></div>
                          <div class="mat-header-cell" style="font-weight: bold;"><span class="headerText"></span></div>
                          <div class="mat-header-cell" id="headerWithIcon" style="font-weight: bold;"><mat-icon class="icon">email</mat-icon><span class="headerText"> Email me all <mat-slide-toggle><span class="text-small text-italic">{{emailAll === true ? ' (on) ' :
                              toggle1 === false ? ' (off) ' : ' (off) ' }}</span></mat-slide-toggle></span></div>
                        </div>
                        <div class="mat-row">
                            <div class="mat-header-cell">Your Events</div>
                            <div class="mat-cell">
                              <mat-checkbox>new</mat-checkbox> &nbsp; &nbsp; <mat-checkbox>updated</mat-checkbox>
                            </div>
                            <div class="mat-cell"><mat-slide-toggle><span class="text-small text-italic">{{toggle1 === true ? ' (on) ' :
                                toggle1 === false ? ' (off) ' : ' (off) ' }}</span></mat-slide-toggle></div>
                        </div>
                        <div class="mat-row">
                          <div class="mat-header-cell">Your Organization Events</div>
                          <div class="mat-cell">
                              <mat-checkbox>new</mat-checkbox> &nbsp; &nbsp; <mat-checkbox>updated</mat-checkbox>
                            </div>
                          <div class="mat-cell"><mat-slide-toggle><span class="text-small text-italic">{{toggle2 === true ? ' (on) ' :
                              toggle1 === false ? ' (off) ' : ' (off) ' }}</span></mat-slide-toggle></div>
                        </div>
                        <div class="mat-row">
                          <div class="mat-header-cell">Your Collaboration Events</div>
                          <div class="mat-cell">
                              <mat-checkbox>new</mat-checkbox> &nbsp; &nbsp; <mat-checkbox>updated</mat-checkbox>
                            </div>
                          <div class="mat-cell"><mat-slide-toggle><span class="text-small text-italic">{{toggle3 === true ? ' (on) ' :
                              toggle1 === false ? ' (off) ' : ' (off) ' }}</span></mat-slide-toggle></div>
                        </div>
                        <div class="mat-row">
                          <div class="mat-header-cell">All Events*</div>
                          <div class="mat-cell">
                              <mat-checkbox>new</mat-checkbox> &nbsp; &nbsp; <mat-checkbox>updated</mat-checkbox>
                            </div>
                          <div class="mat-cell"><mat-slide-toggle><span class="text-small text-italic">{{toggle3 === true ? ' (on) ' :
                              toggle1 === false ? ' (off) ' : ' (off) ' }}</span></mat-slide-toggle></div>
                        </div>
                      </div>
                      <div class="warning">
                        <p>* Beware that selecting this option will create notifications for all events that you have permission to view,
                          regardless of ownership,
                          diagnosis, species, location, or any other detail. Consider a Custom Notification (below) to specify events
                          pertaining to your specific interest.</p>
                      </div>
                   </div>
              </mat-card-content>

            </mat-card>
            <mat-divider style="margin: 25px auto;" [inset]="true"></mat-divider>
            <mat-card>
                <mat-card-title>
                    Custom Notifications
                    <button mat-button color="accent" (click)="newCustomNotification()"><mat-icon>add_alert</mat-icon>Add New Custom Notification</button>
                </mat-card-title>
                <mat-card-content>
                  <div class="results-table-div">
                      <div class="mat-table">
                          <div class="mat-header-row">
                            <div class="mat-header-cell" style="font-weight: bold;">Cue</div>
                            <div class="mat-header-cell" style="font-weight: bold;"><span class="headerText"></span></div>
                            <div class="mat-header-cell" id="headerWithIcon" style="font-weight: bold;"><mat-icon class="icon">email</mat-icon><span class="headerText"> Email me all <mat-slide-toggle><span class="text-small text-italic">{{toggle3 === true ? ' (on) ' :
                                toggle1 === false ? ' (off) ' : ' (off) ' }}</span></mat-slide-toggle></span></div>
                            <div class="mat-header-cell" id="headerWithIcon" style="font-weight: bold;"><span class="headerText"></span></div>
                          </div>
                          <div class="mat-row" *ngFor="let cue of test_data">
                              <div class="mat-header-cell">{{cue.name}}</div>
                              <div class="mat-cell">
                                <mat-checkbox>new</mat-checkbox> &nbsp; &nbsp; <mat-checkbox>updated</mat-checkbox>
                              </div>
                              <div class="mat-cell"><mat-slide-toggle><span class="text-small text-italic">{{toggle1 === true ? ' (on) ' :
                                  toggle1 === false ? ' (off) ' : ' (off) ' }}</span></mat-slide-toggle></div>
                              <div class="mat-cell"><mat-icon class="icon" color="warn" (click)="deleteWarning(cue)">delete</mat-icon></div>
                          </div>
                        </div>
                        
                  </div>
                </mat-card-content>
            </mat-card>
        </mat-expansion-panel>
      </mat-accordion>
    <mat-card>
        <mat-card-title>
            Notifications
        </mat-card-title>
        <mat-card-title>

            <div class="results-card-title-row">
              <span class="results-button-row">
                <button mat-button color="accent" (click)="openCreateContactDialog()">
                  <i class="material-icons">
                    check_circle_outline
                  </i> Mark as Read</button>
                <button mat-button color="warn" (click)="openContactRemoveConfirm()"
                  [disabled]="selection.selected.length === 0">
                  <i class="material-icons">
                    remove_circle
                  </i> Delete</button>
              </span>
    
            </div>
          </mat-card-title>
        <div class="results-table-div">

            <mat-table [dataSource]="notificationsDataSource" matSort matSortActive="read" matSortDirection="desc"
              *ngIf="notificationsDataSource.data.length > 0">
  
              <!-- Selection column -->
              <ng-container matColumnDef="select">
                <mat-header-cell *matHeaderCellDef>
                  <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()">
                  </mat-checkbox>
                </mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)">
                  </mat-checkbox>
                </mat-cell>
              </ng-container>
  
              <!-- Message Column -->
              <ng-container matColumnDef="read">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Message </mat-header-cell>
                <mat-cell *matCellDef="let notification" [ngStyle]="{'font-weight':notification.read === true ? 'bold' : 'normal' }"> {{notification.message}} </mat-cell>
              </ng-container>
  
              <!-- Source -->
              <ng-container matColumnDef="created_date">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Date </mat-header-cell>
                <mat-cell *matCellDef="let notification"> {{notification.created_date}} </mat-cell>
              </ng-container>
  
              <!-- Date -->
              <ng-container matColumnDef="source">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Source </mat-header-cell>
                <mat-cell *matCellDef="let notification"> {{notification.source}} </mat-cell>
              </ng-container>
  
              <mat-header-row *matHeaderRowDef="notificationDisplayedColumns"></mat-header-row>
              <mat-row *matRowDef="let event; columns: notificationDisplayedColumns;" (click)="navigateToEvent(event)" matTooltip="Click notification to navigate to event details page"></mat-row>
            </mat-table>
  
            <div *ngIf="notificationsDataSource.data.length === 0 && notificationsLoading === false">
              <h3>No notifications</h3>
            </div>
  
            <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 50]"></mat-paginator>
          </div>
    </mat-card>
</div>